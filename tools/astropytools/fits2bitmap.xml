<tool id="astropy_fits2bitmap" name="astropy fits2bitmap" version="0.1.0+galaxy0" profile="21.05">
    <requirements>
        <requirement type="package" version="5.2.2">astropy</requirement>
        <requirement type="package" version="3.7.2">matplotlib</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        fits2bitmap
        '$input_fits'
        --stretch '$stretch'
        --cmap '$cmap'
        -o out.png
    ]]></command>
    <inputs>
        <param type="data" name="input_fits" format="fits" label="FITS file containing a sky image"/>
        <param type="select" name="stretch" label="Stretch image" help="Type of image scale stretching">
            <option value="linear" selected="true">linear stretch</option>
            <option value="sqrt">square root representation</option>
            <option value="power">power law representation</option>
            <option value="log">logarithmic representation</option>
            <option value="asinh">asinh representation</option>
        </param>
        <param type="text" name="cmap" label="Color map" help="matplotlib color map name, e.g. Greys_r"/>
    </inputs>
    <outputs>
        <data name="output_png" format="png" from_work_dir="out.png" />
    </outputs>
    <tests>
        <test>
            <param name="input_fits" value="legacysurvey_image.fits"/>
            <param name="stretch" value="log"/>
            <param name="cmap" value="jet"/>
            <output name="output_png" file="legacysurvey_image.png"/>
        </test>
    </tests>
    <help><![CDATA[
Creates a bitmap file from a FITS sky image. 
The dynamic range of the FITS image is represented in the output bitmap image by applying "stretch" transformation.
Matplotlib colormaps are used to represent resulting intensity.

---------

**Example:**

Here is an example of converting SDSS LegacySurvey image of NGC4388:

.. image:: test-data/legacysurvey_image.png

Note that you can also visualize FITS files directly in galaxy with interactive interface based on AladinLite.

This tool represents a script which is part of the Astropy package. See
https://docs.astropy.org/en/latest/io/fits/usage/scripts.html#module-astropy.io.fits.scripts.fitsinfo
for further documentation.
    ]]></help>
    <citations>
        <citation type="doi">
            10.3847/1538-4357/ac7c74
        </citation>
    </citations>
</tool>
